<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>APS Analytics for iOS</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="Scroll EclipseHelp Exporter" name="generator">

    <link type="text/css" rel="stylesheet" href="css/eclipse-defaults.css">
    <link type="text/css" rel="stylesheet" href="css/common.css">
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print">
</head>
<body>
    <div class="container">
        <div class="header"></div>

        <div id="src-43298730" class="content">
                        <h1>APS Analytics for iOS</h1>
    <p>    </p>
    <div class="confbox admonition admonition-warning aui-message problem shadowed information-macro">
            <div class="title">Pro or Enterprise Subscription Required</div>
            <p>This AMPLIFY Appcelerator Services feature requires a Pro or Enterprise Subscription.    </p>
    </div>
        <p>    </p>
<ul class="toc-indentation "><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-Introduction">Introduction</a>    </p>
</li><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-Terminology">Terminology</a>    </p>
</li><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-GettingStarted">Getting Started</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-AdvancedInitializationOptions">Advanced Initialization Options</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-SessionTimeout">Session Timeout</a>    </p>
</li></ul></li></ul></li><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-CreatingCustomEvents">Creating Custom Events</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-FeatureEvents">Feature Events</a>    </p>
</li><li class=" ">    <p><a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-GeoEvents">Geo Events</a>    </p>
</li></ul></li></ul>    <p>This page describes how to use the AMPLIFY Appcelerator Services Analytics for native iOS applications, built with Objective-C and the iOS APIs.    </p>
    <div class="confbox panel panel">
            <div class="title">Not developing a native iOS application with Objective-C?</div>
        <p>See the following topics to use the Appcelerator Analytics Service on other platforms:    </p>
    <p>    <img src="images/download/attachments/43298732/android_icon.png" alt="images/download/attachments/43298732/android_icon.png" class="confluence-embedded-image">
        </p>
    <p>For native Android applications built with Java, see <a class="document-link " href="APS_Analytics_for_Android.html">APS Analytics for Android</a>.    </p>
    <p>    <img src="images/download/attachments/43298732/titanium_icon.png" alt="images/download/attachments/43298732/titanium_icon.png" class="confluence-embedded-image">
        </p>
    <p>For Titanium Applications, see <a class="document-link " href="Appcelerator_Analytics.html">Appcelerator Analytics</a>.    </p>
    </div>
    <div class="section section-2 " id="src-43298730_APSAnalyticsforiOS-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p>Appcelerator Analytics collects real-time data about your application&apos;s usage which can then be viewed in the <strong class=" "><a class="document-link " href="Managing_Client_Applications.html#src-43298774_ManagingClientApplications-AnalyticsViewingReal-timeandAggregatedAnalytics">Analytics dashboard</a></strong>. By default, the Analytics dashboard provides information about app installs, number of sessions, and average app session length (organized by app name, platform, and geography). Your app can also utilize custom analytic events and event funnels.    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro has-no-icon">
            <p>This document provides an overview of the features provided by Analytics, and how to use them using the Titanium SDK. <strong class=" ">If you are developing an iOS application with Objective-C or Swift or an Android application with Java</strong>, see <a class="document-link " href="APS_Analytics_for_iOS.html">APS Analytics for iOS</a> or <a class="document-link " href="APS_Analytics_for_Android.html">APS Analytics for Android</a> for details on using Analytics.    </p>
    </div>
        <p>For platform-specific details about how analytics captured, see <a class="document-link " href="Analytics_Architecture.html">Analytics Architecture</a>    </p>
    <p>For information about viewing analytics data, see <a class="document-link " href="Managing_Client_Applications.html#src-43298774_ManagingClientApplications-AnalyticsViewingReal-timeandAggregatedAnalytics">Managing Client Applications</a>    </p>
    </div>
    <div class="section section-2 " id="src-43298730_APSAnalyticsforiOS-Terminology">
        <h2 class="heading "><span>Terminology</span></h2>
    <p><strong class=" ">Analytics</strong> refers to data about how your application has been used, as well as information about how users interact with your application. Analytics data is transmitted in the form of <i class=" ">events</i>.    </p>
    <p>Events are operational milestones in the application. Some events are generated automatically, such as those that mark an installation, or the beginning and end of a session. Others may be <strong class=" ">custom events</strong>, which have a meaning specific to an application, such as tapping a specific button or opening a certain window.    </p>
    <p>A feature event represents an action a user could take in an application, such as &apos;liking an item&apos; or launching a video&apos;. Applications use the Titanium or APSAnalytics API to create custom events.    </p>
    <p><strong class=" ">Event funnels</strong> let you define custom, ordered event sequences that let you track a specific user process, such as finding a product and making a purchase.    </p>
    <p>The <strong class=" ">Analytics dashboard</strong> organizes, analyzes, and presents analytics data captured for your applications. You also use the Analytics dashboard to create and view event funnels.    </p>
    </div>
    <div class="section section-2 " id="src-43298730_APSAnalyticsforiOS-GettingStarted">
        <h2 class="heading "><span>Getting Started</span></h2>
    <p>To integrate the Performance service with a new or existing iOS application:    </p>
<ol class=" "><li class=" ">    <p>Go to the <a class="external-link external-link" href="https://platform.axway.com/">Dashboard</a> and create a new native iOS application.    </p>
</li><li class=" ">    <p>Download the Services SDK and get your Analytics application key.    </p>
</li><li class=" ">    <p>Unpack the <tt class=" ">appcelerator-sdk-ios-&lt;VERSION&gt;.zip</tt> file.    </p>
</li><li class=" ">    <p>Drag the <tt class=" ">Appcelerator.framework</tt> folder into your Xcode project&apos;s root folder if you are using Xcode 6 and above, or the  <tt class=" ">Frameworks</tt> folder if you are using Xcode 5 or below.    </p>
</li><li class=" ">    <p>Select <strong class=" ">Copy items into destination&#x2026;</strong> and click <strong class=" ">Finish</strong>.    </p>
</li><li class=" ">    <p>Select your project in the Project Navigator and click the <strong class=" ">Build Phases</strong> tab.    </p>
</li><li class=" ">    <p>Expand the <strong class=" ">Link Binary With Libraries</strong> section and add the  <tt class=" ">libsqlite3.dylib</tt> and <tt class=" ">libz.dylib</tt> frameworks.    </p>
</li><li class=" ">    <p>Click the <strong class=" ">Build Settings</strong> tab, then click the <strong class=" ">All</strong> button in the top-left corner of the tab.    </p>
</li><li class=" ">    <p>Expand the <strong class=" ">Linking</strong> section and add <tt class=" ">-ObjC</tt>  to Other Linker Flags.    </p>
</li><li class=" ">    <p>In your application delegate implementation file, import <tt class=" ">Appcelerator/Appcelerator.h.</tt>    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                    <div class="title">AppDelegate.m</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="AppDelegate.m">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> &lt;Appcelerator/Appcelerator.h&gt;</code></div>
</div>
    </div>
</li><li class=" ">    <p>In the application delegate&apos;s <tt class=" ">application:didFinishLaunchingWithOptions</tt> method, enable the service by calling the APSServiceManager&apos;s <tt class=" ">enableWithAppKey:</tt> method.    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                    <div class="title">AppDelegate.m</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="AppDelegate.m">
<div class="line"><code class="plain">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    [[APSServiceManager sharedInstance] enableWithAppKey:@</code><code class="string">&quot;APS_APP_KEY&quot;</code><code class="plain">];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> YES;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-tip aui-message success shadowed information-macro">
            <p class="diff-block-target diff-block-context">To get your APS App key:    </p>
<ol class=" "><li class="diff-block-target diff-block-context ">    <p>Go to the <a class="external-link external-link" href="https://platform.axway.com/">Dashboard</a>.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>Select your application from the <strong class=" ">Apps</strong> drop-down menu.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>Click the <strong class=" ">Overview</strong> tab.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>Click the <strong class=" ">Services</strong> button.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>Click <strong class=" ">Show Key</strong> under the Analytics, Performance and Cloud section.    </p>
</li></ol>    </div>
    </li></ol>    <p>The iOS application can now send user session events and make additional method calls using the <a class="external-link external-link" href="http://docs.appcelerator.com/aps-sdk-apidoc/latest/ios/Classes/APSAnalytics.html"> <tt class=" ">APSAnalytics</tt> class </a> .    </p>
    <div class="section section-3 " id="src-43298730_APSAnalyticsforiOS-AdvancedInitializationOptions">
        <h3 class="heading "><span>Advanced Initialization Options</span></h3>
    <div class="section section-4 " id="src-43298730_APSAnalyticsforiOS-SessionTimeout">
        <h4 class="heading "><span>Session Timeout</span></h4>
    <p>By default, after the application has been back grounded for 30 seconds, the Analytics service ends the current user session and starts a new one when the application enters the foreground again. To adjust the timeout, use the <tt class=" ">sessionTimeout</tt> property.    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="comments">// Sets the timeout to 15 seconds instead of 30 seconds.</code></div>
<div class="line"><code class="plain">[APSAnalytics sharedInstance].sessionTimeout = </code><code class="value">15</code><code class="plain">;</code></div>
</div>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-2 " id="src-43298730_APSAnalyticsforiOS-CreatingCustomEvents">
        <h2 class="heading "><span>Creating Custom Events</span></h2>
    <p>You use the <a class="external-link external-link" href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Analytics">A</a><a class="external-link external-link" href="http://docs.appcelerator.com/aps-sdk-apidoc/latest/ios/Classes/APSAnalytics.html">PSAnalytics API </a>  to log and report custom events. <a class="document-link " href="APS_Analytics_for_iOS.html#src-43298730_APSAnalyticsforiOS-FeatureEvents">Feature Events</a> are for capturing a user action, such as selecting a specific menu option or launching a video.    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
            <p>Currently, the optional <tt class=" ">data</tt> parameter of the Titanium.Analytics methods, which is used to log a dictionary object, cannot be accessed through the Dashboard.    </p>
    </div>
        <div class="section section-3 " id="src-43298730_APSAnalyticsforiOS-FeatureEvents">
        <h3 class="heading "><span>Feature Events</span></h3>
    <p>You use the <tt class=" ">sendAppFeatureEvent:payload</tt> method to generate a feature event that captures a specific application or user activity. A feature event should represent an action, such as launching a video, or &apos;new item&apos;, &apos;launch video&apos;, and so forth. The name you assign to a feature event should incorporate the application state into the event name, rather than long descriptive names. The following naming convention is suggested, where <i class=" ">group.event</i> refers to the parent event:    </p>
    <p><tt class=" ">group.event.sub-event</tt>    </p>
    <p>Feature event names should be as generic as possible. For instance, if you want to track when users select a certain menu option, use a name like <strong class=" ">     <span style="color: #000000;">
&quot;user.menu.selection&quot;,    </span>
 </strong>     <span style="color: #000000;">
 not <strong class=" ">&quot;joeuser.menu.selection&quot;</strong>. The first option is better because it groups all the same types of an event into a single metric that&apos;s easy to view on Dashboard. The person analyzing the data only has to look at a single number to get an overview of how many users have selected that menu option. The second might be fine for very small user bases, but if you have more than 100 users it means that the person analyzing the data would have to look through 100 different event names to be able to generate any useful data.    </span>
    <span style="color: #000000;">
     </span>
    </p>
    <p>For example, to track a user&apos;s menu selection you might use the following code, where the 10 digit number uniquely identifies the selection in your code:    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                    <div class="title">Good Practice: Track the State with the Naming Syntax</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Good Practice: Track the State with the Naming Syntax">
<div class="line"><code class="plain">[[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">&quot;select.item.12345678910&quot;</code><code class="plain"> payload:nil];</code></div>
</div>
    </div>
    <p>You should avoid using long, descriptive event names, as shown below:    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                    <div class="title">Bad Practice: Avoid Long Descriptions</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Bad Practice: Avoid Long Descriptions">
<div class="line"><code class="plain">&#xA0;[[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">&quot;Select Item THIS IS THE DESCRIPTION OF THE EVENT -12345678910&quot;</code><code class="plain"> payload:nil];</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-43298730_APSAnalyticsforiOS-GeoEvents">
        <h3 class="heading "><span>Geo Events</span></h3>
    <p>Use the <tt class=" ">sendAppGeoEvent</tt> to send real-time geographic data to the Analytics service. Pass the method a CLLocation object containing the location data. For example, you can use <tt class=" ">locationManager: didUpdateLocations</tt> delegate method to send geo-events when the device receives new location data.    </p>
    <div class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                    <div class="title">GeoController.m</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="GeoController.m">
<div class="line"><code class="comments">// Delegate method from the CLLocationManagerDelegate protocol</code></div>
<div class="line"><code class="plain">- (</code><code class="keyword">void</code><code class="plain">)locationManager:(CLLocationManager *)manager</code></div>
<div class="line"><code class="plain">     didUpdateLocations:(NSArray *)locations</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    CLLocation *newLocation = [locations lastObject];</code></div>
<div class="line"><code class="plain">    [[APSAnalytics sharedInstance] sendAppGeoEvent:newLocation];</code></div>
<div class="line"><code class="plain">    NSLog(@</code><code class="string">&quot;%f, %f&quot;</code><code class="plain">, newLocation.coordinate.latitude, newLocation.coordinate.longitude);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&#xA0;</div>
<div class="line"><code class="color1">@end</code></div>
</div>
    </div>
    </div>
    </div>
        </div>
    
        
    </div>
</body>
</html>
