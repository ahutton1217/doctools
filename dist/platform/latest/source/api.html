<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Arrow-API'>/**
</span> * @class Arrow.API
 * An API provides a way for a client to access your application, execute custom logic and
 * internally access the application&#39;s models and APIs, then return data back to the client application.
 * Use an API to perform a custom operation on model data that is not exposed as one of the
 * standardized methods.
 *
 * ### Create an API Endpoint
 *
 * To create an API, define a new API instance with the API constructor,
 * then add the instance to the server instance and bind the API instance to the
 * Arrow server&#39;s app instance.
 *
 * Pass an implementation object, Arrow configuration object and Arrow instance to the constructor.
 * Set any API properties on the implementation object (except the ones marked non-creation),
 * but the following properties are required to be set: {@link #action}, {@link #description},
 * {@link #group} and {@link #path}.
 *
 * After creating the API instance, add the API instance to the Arrow instance by calling the Arrow
 * instance&#39;s {@link Arrow#addAPI addAPI()} method, then call the API instance&#39;s [bind()](#bind) method
 * and pass it an app instance.
 *
 *      var Arrow = require(&#39;arrow&#39;);
 *      var server = new Arrow();
 *      // since the API relies on a model,
 *      // need to wait for the model to be loaded before creating the API
 *      server.on(&#39;starting&#39;, function() {
 *          var fooAPI = new Arrow.API({
 *              group: &#39;foo&#39;,
 *              path: &#39;/api/foo/&#39;,
 *              method: &#39;GET&#39;,
 *              description: &#39;Get all the Foo objects&#39;,
 *              model: &#39;foo&#39;,
 *              action: function(request, response, next) {
 *                  request.model.findAll(function(err, results) {
 *                      if (err) {
 *                          next(err);
 *                      } else {
 *                          next(null, results);
 *                      }
 *                  });
 *              }
 *          }, server.config, server);
 *          server.add(fooAPI);
 *          fooAPI.bind(server.app);
 *      }
 *      server.start();
 *
 * Alternatively, you can create an API definition file that is automatically loaded by the Arrow Project.
 * For details, see the [Arrow APIs guide](http://docs.appcelerator.com/platform/latest/#!/guide/Arrow_APIs).
 *
 * ### Invoke an API Endpoint
 *
 * To invoke an API endpoint within the application, use the Arrow instance&#39;s [getAPI()](Arrow#getAPI) method.
 * An API is identified by its path and method (HTTP verb), or its nickname if you defined one when
 * creating the API. After retrieving the API instance, call its [execute()](#execute) method.
 *
 *     server.getAPI(&#39;foo&#39;, &#39;GET&#39;).execute({}, function (err, results) {
 * 	       if (err) {
 * 	           server.logger.error(err);
 *         } else {
 * 	           // do something with results
 *         }
 *     });
 */

<span id='Arrow-API-method-constructor'>/**
</span> * @constructor
 * Creates a new API instance.
 * @param {Dictionary&lt;Arrow.API&gt;} impl Implementation object.
 * Set any API properties on the object except the ones marked non-creation. The following
 * properties must be set: {@link #action}, {@link #description}, {@link #group} and {@link #path}.
 * @param {Object} config Arrow configuration object.
 * @param {Arrow} arrow Arrow instance.
 */

<span id='Arrow-API-property-action'>/**
</span> * @property {Function} action
 * Logic to execute when the endpoint is invoked by the client application.
 * The function is passed a request object, response object and next() function.
 * You should always make sure that the action function calls the next() function
 * regardless if the result is a success or an error.
 */
<span id='Arrow-API-property-after'>/**
</span> * @property {String/Array&lt;String&gt;} after
 * One or more Blocks to be executed after the request. Blocks are referenced by their
 * name property. If you want to execute multiple blocks, you should specify them as an
 * array of block names. If multiple blocks are specified, they are executed in the order specified.
 * Specify either `after` or `post` but not both.
 */
<span id='Arrow-API-property-app'>/**
</span> * @property {Object} app
 * @nonCreation
 * Express app instance.
 */
<span id='Arrow-API-property-before'>/**
</span> * @property {String/Array&lt;String&gt;} before
 * One or more Blocks to be executed before the request. Blocks are referenced by their
 * name property. If you want to execute multiple blocks, you should specify them as an
 * array of block names. If multiple blocks are specified, they are executed in the order specified.
 * Specify either `before` or `pre` but not both.
 */
<span id='Arrow-API-property-config'>/**
</span> * @property {Object} config
 * @nonCreation
 * Configuration object used to initialize the API instance.
 */
<span id='Arrow-API-property-constructor'>/**
</span> * @property {Function} constructor
 * Custom constructor to execute custom initialization logic. The new API instance is passed to
 * `this` in the function.
 */
<span id='Arrow-API-property-description'>/**
</span> * @property {String} description
 * Human-readable description of the API, which is used by the generated API documentation.
 */
<span id='Arrow-API-property-filename'>/**
</span> * @property {String} filename
 * @nonCreation
 * File used to load the API instance.
 */
<span id='Arrow-API-property-group'>/**
</span> * @property {String} group
 * Logical name for the API grouping.
 */
<span id='Arrow-API-property-method'>/**
</span> * @property {String} method
 * HTTP verb: `GET`, `PUT`, `POST` or `DELETE`.
 */
/*
 * @property {Function} middleware
 * @nonCreation
 * Middleware block that provides access to the API&#39;s action implementation.
 */
<span id='Arrow-API-property-model'>/**
</span> * @property {Arrow.Model} model
 * The model to use for the request. Passed as the `model` property in the `request` and `response`
 * objects of the {@link #action} function.
 */
<span id='Arrow-API-property-nickname'>/**
</span> * @property {String} nickname
 * Alternative identifier for the API. By default, the API is identified by its path and HTTP verb.
 * If you do not specify a nickname, this property will be set to the path.
 */
<span id='Arrow-API-property-parameters'>/**
</span> * @property {Object} parameters
 * Input parameters required to execute the API endpoint. This is an object of key-value pairs,
 * where the key is the name of the parameter and the value is an object with the following properties:
 *
 * * optional (Boolean): Determines if the parameter is optional (`true`) or required (`false`).
 * * type (String): the type of input parameter: `path` or `query`.
 * * description (String): used for generating API documentation.
 */
<span id='Arrow-API-property-path'>/**
</span> * @property {String} path
 * API endpoint.
 */
<span id='Arrow-API-property-plural'>/**
</span> * @property {String} plural
 * A string used as the property name when your API endpoint returns an array.
 * By default, the plural value is the plural of the model name.
 * For example, if your model is named car, the default plural would be cars.
 */
<span id='Arrow-API-property-post'>/**
</span> * @property post
 * @alias #after
 */
<span id='Arrow-API-property-pre'>/**
</span> * @property pre
 * @alias #before
 */
<span id='Arrow-API-property-response'>/**
</span> * @property {Arrow.Model} response
 * The model to use for the response. Only use the property if your request and response models are
 * different. Passed as the `modelResponse` property in the `request` and `response`
 * objects of the {@link #action} function.
 */
<span id='Arrow-API-property-route'>/**
</span> * @property {Object} route
 * @nonCreation
 * Express route instance that binds the endpoint to the logic.
 */
<span id='Arrow-API-property-singular'>/**
</span> * @property {String} singular
 * A string used as the property name when your API endpoint returns a single record.
 * By default, the singular value is the name of the model.
 */
<span id='Arrow-API-property-timestamp'>/**
</span> * @property {String} timestamp
 * @nonCreation
 * Datetime when the route was last synced.
 */
</pre>
</body>
</html>
