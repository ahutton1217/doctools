<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">// jscs:disable
<span id='HtmlRendererEngine'>/**
</span> * @class HtmlRendererEngine
 * Renderer engine for HTML templates.
 * @extends ArrowRendererEngine
 * @pseudo
 */

<span id='HtmlRendererEngine-property-skipread'>/**
</span> * @property skipread
 * @hide
 */
// jscs:enable
var util = require(&#39;./util&#39;),
	fs = require(&#39;fs&#39;);

// jscs:disable jsDoc

exports.extension = &#39;html&#39;;

function templatize(content, data) {
	if (data) {
		// support token replacement in generic HTML files
		var re = new RegExp(&#39;\\${(&#39; + Object.keys(data).join(&#39;|&#39;) + &#39;)}&#39;, &#39;g&#39;);
		content = content.replace(re, function (key) {
			return data[key.substring(2, key.length - 1)] || key;
		});
	}
	return content;
}

function render(app, filename, opts) {
	filename = util.resolveLayoutFilename(app, filename);
	return templatize(fs.readFileSync(filename).toString(), opts);
}

exports.createRenderer = function (content, filename, app) {
	return function (filePath, opts, callback) {
		var tpl = templatize(content, opts);
		util.render(app, tpl, opts, exports.extension, render, callback);
	};
};
</pre>
</body>
</html>
